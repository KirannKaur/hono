<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="471.6px" preserveAspectRatio="none" style="width:770px;height:471px;" version="1.1" viewBox="0 0 770 471" width="770.4px" zoomAndPan="magnify"><defs><filter height="300%" id="f1h6y90axv9w9k" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1h6y90axv9w9k)" height="34.9594" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="579.6" y="183.3937"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="97.2" x2="97.2" y1="45.9563" y2="423.3094"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="585" x2="585" y1="45.9563" y2="423.3094"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="727.8" x2="727.8" y1="45.9563" y2="423.3094"/><rect fill="#FEFECE" filter="url(#f1h6y90axv9w9k)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="170.4" x="9.6" y="3.6"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="153.6" x="18" y="27.5941">AMQP 1.0 Network</text><rect fill="#FEFECE" filter="url(#f1h6y90axv9w9k)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="170.4" x="9.6" y="422.1094"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="153.6" x="18" y="446.1035">AMQP 1.0 Network</text><rect fill="#FEFECE" filter="url(#f1h6y90axv9w9k)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="188.4" x="489" y="3.6"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="171.6" x="497.4" y="27.5941">Business Application</text><rect fill="#FEFECE" filter="url(#f1h6y90axv9w9k)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="188.4" x="489" y="422.1094"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="171.6" x="497.4" y="446.1035">Business Application</text><rect fill="#FEFECE" filter="url(#f1h6y90axv9w9k)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="63.6" x="694.2" y="3.6"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="46.8" x="702.6" y="27.5941">Timer</text><rect fill="#FEFECE" filter="url(#f1h6y90axv9w9k)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="63.6" x="694.2" y="422.1094"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="46.8" x="702.6" y="446.1035">Timer</text><rect fill="#FFFFFF" filter="url(#f1h6y90axv9w9k)" height="34.9594" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="579.6" y="183.3937"/><polygon fill="#A80036" points="110.4,78.5156,98.4,83.3156,110.4,88.1156,105.6,83.3156" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="103.2" x2="584.4" y1="83.3156" y2="83.3156"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="459.6" x="117.6" y="77.2365">transfer("command/${tenant_id}/${device_id}", command)</text><path d="M12,98.9156 L12,146.9156 L176.4,146.9156 L176.4,110.9156 L164.4,98.9156 L12,98.9156 " fill="#FBFB77" filter="url(#f1h6y90axv9w9k)" style="stroke: #A80036; stroke-width: 1.2;"/><path d="M164.4,98.9156 L164.4,110.9156 L176.4,110.9156 L164.4,98.9156 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="139.2" x="19.2" y="119.3959">forward command</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="69.6" x="19.2" y="137.5553">to device</text><polygon fill="#A80036" points="565.2,178.5938,577.2,183.3937,565.2,188.1938,570,183.3937" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="97.2" x2="572.4" y1="183.3937" y2="183.3937"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="176.4" x="105.6" y="177.3146">disposition("accepted")</text><polygon fill="#A80036" points="714,213.5531,726,218.3531,714,223.1531,718.8,218.3531" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="585.6" x2="721.2" y1="218.3531" y2="218.3531"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="36" x="594" y="212.274">start</text><path d="M505.2,233.9531 L505.2,281.9531 L661.2,281.9531 L661.2,245.9531 L649.2,233.9531 L505.2,233.9531 " fill="#FBFB77" filter="url(#f1h6y90axv9w9k)" style="stroke: #A80036; stroke-width: 1.2;"/><path d="M649.2,233.9531 L649.2,245.9531 L661.2,245.9531 L649.2,233.9531 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="130.8" x="512.4" y="254.4334">wait for response</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="90" x="512.4" y="272.5928">from device</text><polygon fill="#A80036" points="598.8,313.6312,586.8,318.4313,598.8,323.2313,594,318.4313" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="591.6" x2="727.2" y1="318.4313" y2="318.4313"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="104.4" x="606" y="312.3521">fail command</text><path d="M478.8,334.0313 L478.8,400.0313 L687.6,400.0313 L687.6,346.0313 L675.6,334.0313 L478.8,334.0313 " fill="#FBFB77" filter="url(#f1h6y90axv9w9k)" style="stroke: #A80036; stroke-width: 1.2;"/><path d="M675.6,334.0313 L675.6,346.0313 L687.6,346.0313 L675.6,334.0313 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="139.2" x="486" y="354.5115">may want to close</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="100.8" x="486" y="372.6709">response link</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="183.6" x="486" y="390.8303">(if scoped to command)</text><!--
@startuml
scale 1.2

participant "AMQP 1.0 Network"
participant "Business Application"
participant Timer

"Business Application" -> "AMQP 1.0 Network": transfer("command/${tenant_id}/${device_id}", command)
note over "AMQP 1.0 Network"
forward command
to device
end note
"AMQP 1.0 Network" -> "Business Application"++: disposition("accepted")
"Business Application" -> Timer- -: start
note over "Business Application"
wait for response
from device
end note
Timer -> "Business Application": fail command
note over "Business Application"
may want to close
response link
(if scoped to command)
end note
@enduml

PlantUML version 1.2019.07beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>